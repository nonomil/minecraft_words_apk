<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® Minecraft å•è¯å­¦ä¹ æ¸¸æˆ</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/kindergarten.css">
</head>
<body>
    <div class="container">
        <!-- å¥–åŠ±ç³»ç»Ÿ -->
        <div class="reward-system" id="rewardSystem">
            <div class="unified-rewards-container">
                <div class="rewards-label">å­¦ä¹ è¿›åº¦ï¼šğŸ’ <span id="diamondTotal">0</span> âš”ï¸ <span id="swordTotal">0</span></div>
                <div class="rewards-row" id="rewardsRow"></div>
            </div>
        </div>

        <div class="header">
            <h1>ğŸ® Minecraft å•è¯å­¦ä¹ æ¸¸æˆ</h1>
            <p>çœ‹å›¾å­¦å•è¯ï¼Œå¬éŸ³è¯†ä¸­æ–‡ï¼Œè½»æ¾æŒæ¡ Minecraft è¯æ±‡ï¼</p>
        </div>

        <div class="game-modes">
            <button class="mode-btn learn active" onclick="switchMode('learn')">ğŸ“š å­¦ä¹ æ¨¡å¼</button>
            <button class="mode-btn quiz" onclick="switchMode('quiz')">ğŸ¯ æµ‹è¯•æ¨¡å¼</button>
            <button class="mode-btn settings" onclick="switchMode('settings')">âš™ï¸ è®¾ç½®</button>
            <button onclick="shuffleWords()" style="margin-left: 10px; padding: 8px 15px; border-radius: 5px; border: 1px solid #ddd; background: #f8f9fa; cursor: pointer;">ğŸ”€ éšæœºæ’åº</button>
            <!-- æš‚æ—¶éšè—å­¦ä¹ ç±»å‹åˆ‡æ¢ -->
            <div class="learn-type-switch" style="margin-top:8px; display: none;">
              <button class="learn-type-btn word" onclick="setLearnType('word')">å•è¯</button>
              <button class="learn-type-btn phrase_en" onclick="setLearnType('phrase_en')">è‹±æ–‡çŸ­è¯­</button>
              <button class="learn-type-btn phrase_zh" onclick="setLearnType('phrase_zh')">ä¸­æ–‡çŸ­è¯­</button>
            </div>
        </div>

        <div class="game-area">

            <!-- å­¦ä¹ æ¨¡å¼ -->
            <div id="learnMode" class="learn-area">
                <!-- åˆ†ç»„è¿›åº¦æ˜¾ç¤º -->
                <div class="group-progress">
                    <div class="group-info">
                        <span class="group-label">ç¬¬ <span id="currentGroup">1</span> ç»„</span>
                        <span class="group-progress-text">(<span id="groupProgress">0</span>/10)</span>
                    </div>
                    <div class="group-progress-bar">
                        <div class="group-progress-fill" id="groupProgressFill"></div>
                    </div>
                </div>

                <div class="word-card" id="wordCard">
                    <div class="word-category" id="wordCategory">é€‰æ‹©è¯åº“å¼€å§‹å­¦ä¹ </div>
                    <img class="word-image" id="wordImage" src="" alt="å•è¯å›¾ç‰‡" style="display: none;">
                    <div class="word-english" id="wordEnglish">æ¬¢è¿ä½¿ç”¨å•è¯å­¦ä¹ æ¸¸æˆ</div>
                    <div class="word-phonetic" id="wordPhonetic" style="display: none;"></div>
                    
                    <!-- å­¦ä¹ é€‰é¡¹ -->
                    <div class="learn-options" id="learnOptions" style="display: none;">
                        <h3>è¿™ä¸ªå•è¯çš„ä¸­æ–‡æ„æ€æ˜¯ï¼Ÿ</h3>
                        <div class="learn-choices" id="learnChoices">
                            <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                        <div class="learn-result" id="learnResult" style="display: none;"></div>
                        <div class="word-phrase" id="wordPhrase">
                            <div class="phrase-title">ğŸ’¡ å¸¸ç”¨çŸ­è¯­</div>
                            <div class="phrase-content" id="phraseContent"></div>
                            <div class="phrase-translation" id="phraseTranslation"></div>
                        </div>
                    </div>
                    
                    <!-- ç­”æ¡ˆæ˜¾ç¤º -->
                    <div class="word-chinese" id="wordChinese" style="display: none;">è¯·å…ˆé€‰æ‹©è¯åº“å¹¶åŠ è½½</div>
                </div>

                <div class="control-buttons">
                    <button class="control-btn prev" onclick="previousWord()" disabled>â¬…ï¸ ä¸Šä¸€ä¸ª</button>
                    <button class="control-btn play" onclick="playAudio()">ğŸ”Š å‘éŸ³</button>
                    <button class="control-btn next" onclick="nextWord()" disabled>ä¸‹ä¸€ä¸ª â¡ï¸</button>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%;"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="currentIndex">0</div>
                        <div class="stat-label">å½“å‰ä½ç½®</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalWords">0</div>
                        <div class="stat-label">æ€»è¯æ±‡æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="learnedCount">0</div>
                        <div class="stat-label">å·²å­¦ä¹ </div>
                    </div>
                </div>
            </div>

            <!-- æµ‹è¯•æ¨¡å¼ -->
            <div id="quizMode" class="quiz-area">
                <!-- åˆ†ç»„è¿›åº¦æ˜¾ç¤º -->
                <div class="group-progress">
                    <div class="group-info">
                        <span class="group-label">ç¬¬ <span id="currentQuizGroup">1</span> ç»„</span>
                        <span class="group-progress-text">(<span id="quizGroupProgress">0</span>/10)</span>
                    </div>
                    <div class="group-progress-bar">
                        <div class="group-progress-fill" id="quizGroupProgressFill"></div>
                    </div>
                </div>

                <!-- å·²ç§»é™¤ .quiz-score ç»Ÿè®¡è¡Œï¼šå¾—åˆ†/æ­£ç¡®ç‡ -->

                <div class="quiz-card">
                    <div class="quiz-question">
                        <img class="quiz-image" id="quizImage" src="" alt="æµ‹è¯•å›¾ç‰‡">
                        <div style="margin: 20px 0;">
                            <button class="control-btn play" onclick="playQuizAudio()">ğŸ”Š å¬å‘éŸ³</button>
                        </div>
                        <h3>è¿™ä¸ªå•è¯çš„ä¸­æ–‡æ„æ€æ˜¯ï¼Ÿ</h3>
                    </div>

                    <div class="quiz-options" id="quizOptions">
                        <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="control-btn next" onclick="nextQuiz()" id="nextQuizBtn" disabled>ä¸‹ä¸€é¢˜ â¡ï¸</button>
                    <button class="control-btn" onclick="restartQuiz()" style="background: linear-gradient(45deg, #FF5722, #E64A19);">ğŸ”„ é‡æ–°å¼€å§‹</button>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgressFill" style="width: 0%;"></div>
                </div>

                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="currentQuizIndex">0</div>
                        <div class="stat-label">å½“å‰é¢˜ç›®</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalQuizWords">0</div>
                        <div class="stat-label">æ€»é¢˜ç›®æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="correctCount">0</div>
                        <div class="stat-label">ç­”å¯¹é¢˜æ•°</div>
                    </div>
                </div>
            </div>

            <!-- è®¾ç½®é¡µé¢ -->
            <div id="settingsMode" class="settings-area">
                <div class="settings-group">
                    <h3>ğŸ“š è¯åº“ç®¡ç†</h3>
                    <div class="setting-item">
                        <label>é¢„è®¾è¯åº“:</label>
                        <select id="vocabSelect">
                            <!-- å¹¼å„¿å›­è¯åº“ -->
                            <optgroup label="ğŸ’ å¹¼å„¿å›­è¯åº“">
                                <option value="1.å¹¼å„¿å›­--åŸºç¡€è¯æ±‡">å¹¼å„¿å›­åŸºç¡€è¯æ±‡ (157è¯)</option>
                                <option value="2.å¹¼å„¿å›­--å­¦ä¹ è¯æ±‡">å¹¼å„¿å›­å­¦ä¹ è¯æ±‡ (202è¯)</option>
                                <option value="3.å¹¼å„¿å›­--è‡ªç„¶è¯æ±‡">å¹¼å„¿å›­è‡ªç„¶è¯æ±‡ (212è¯)</option>
                                <option value="4.äº¤æµè¯æ±‡">äº¤æµè¯æ±‡ (149è¯)</option>
                                <option value="5.æ—¥å¸¸è¯æ±‡">æ—¥å¸¸è¯æ±‡ (138è¯)</option>
                                <option value="6.å¹¼å„¿å›­è¯æ±‡">å¹¼å„¿å›­ç»¼åˆè¯æ±‡ (157è¯)</option>
                            </optgroup>
                            <!-- Minecraft æ ‡å‡†è¯åº“ -->
                            <optgroup label="â›ï¸ Minecraft æ ‡å‡†è¯åº“">
                                <option value="minecraft_1.blocks_æ–¹å—">æ–¹å—è¯æ±‡ (130è¯)</option>
                                <option value="minecraft_2.items_ç‰©å“">ç‰©å“è¯æ±‡ (221è¯)</option>
                                <option value="minecraft_2.items_ç‰©å“2">ç‰©å“è¯æ±‡2 (106è¯)</option>
                                <option value="minecraft_3.entities_å®ä½“">å®ä½“è¯æ±‡ (107è¯)</option>
                                <option value="minecraft_4.environment_ç¯å¢ƒ">ç¯å¢ƒè¯æ±‡ (128è¯)</option>
                                <option value="minecraft_5.biomes_ç”Ÿç‰©ç¾¤ç³»">ç”Ÿç‰©ç¾¤ç³»è¯æ±‡ (69è¯)</option>
                                <option value="minecraft_6.çŠ¶æ€æ•ˆæœ (Status Effects)">çŠ¶æ€æ•ˆæœè¯æ±‡ (84è¯)</option>
                                <option value="minecraft_7.é­”å’’ (Enchantments)">é­”å’’è¯æ±‡ (77è¯)</option>
                                <option value="minecraft_8.è¿›åº¦ (Advancements)">è¿›åº¦è¯æ±‡ (110è¯)</option>
                            </optgroup>
                            <!-- Minecraft ç®€åŒ–è¯åº“ -->
                            <optgroup label="ğŸ® Minecraft ç®€åŒ–è¯åº“">
                                <option value="1.minecraft_åŸºç¡€_basic">MinecraftåŸºç¡€è¯æ±‡ (63è¯)</option>
                                <option value="1.æ™®é€š_common">é€šç”¨è¯æ±‡ (84è¯)</option>
                                <option value="2.minecraft_ä¸­çº§_basic">Minecraftä¸­çº§è¯æ±‡ (60è¯)</option>
                                <option value="3.minecraft_é«˜çº§_advanced">Minecrafté«˜çº§è¯æ±‡ (60è¯)</option>
                                <option value="minecraft_3.å•è¯æ±‡æ€»">Minecraftå®Œæ•´è¯åº“ (1174è¯)</option>
                            </optgroup>
                        </select>
                        <button onclick="loadVocabulary()" style="margin-left: 5px;">åŠ è½½è¯åº“</button>
                    </div>
                    <div class="setting-item">
                        <label>è‡ªå®šä¹‰è¯åº“:</label>
                        <input type="file" id="customVocabFile" accept=".json" style="margin-right: 5px;">
                        <button onclick="loadCustomVocabulary()">åŠ è½½è‡ªå®šä¹‰è¯åº“</button>
                    </div>
                    <div class="setting-item">
                        <label>è¯åº“æ“ä½œ:</label>
                        <button onclick="exportCurrentVocab()" id="exportBtn" disabled style="margin-right: 5px;">ğŸ’¾ å¯¼å‡ºå½“å‰è¯åº“</button>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>ğŸ”Š è¯­éŸ³è®¾ç½®</h3>
                    <div class="setting-item">
                        <label>è¯­éŸ³é€Ÿåº¦:</label>
                        <input type="range" id="speechRate" min="0.5" max="2" step="0.1" value="1">
                        <span id="rateValue">1.0</span>
                    </div>
                    <div class="setting-item">
                        <label>è¯­éŸ³éŸ³è°ƒ:</label>
                        <input type="range" id="speechPitch" min="0.5" max="2" step="0.1" value="1">
                        <span id="pitchValue">1.0</span>
                    </div>
                    <div class="setting-item">
                        <label>è¯­éŸ³éŸ³é‡:</label>
                        <input type="range" id="speechVolume" min="0" max="1" step="0.1" value="1">
                        <span id="volumeValue">1.0</span>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>ğŸ® æ¸¸æˆè®¾ç½®</h3>
                    <div class="setting-item">
                        <label>è‡ªåŠ¨æ’­æ”¾å‘éŸ³:</label>
                        <input type="checkbox" id="autoPlay" checked>
                    </div>
                    <div class="setting-item">
                        <label>æ˜¾ç¤ºå›¾ç‰‡:</label>
                        <input type="checkbox" id="showImages" checked>
                    </div>
                    <div class="setting-item">
                        <label>å¹¼å„¿å›­æ¨¡å¼:</label>
                        <input type="checkbox" id="kindergartenMode" checked>
                    </div>
                    <div class="setting-item">
                        <label>æµ‹è¯•é¢˜ç›®æ•°é‡:</label>
                        <select id="quizCount">
                            <option value="5">5é¢˜</option>
                            <option value="10" selected>10é¢˜</option>
                            <option value="20">20é¢˜</option>
                            <option value="50">50é¢˜</option>
                        </select>
                    </div>
                </div>

                <div class="settings-group">
                    <h3>ğŸ“Š å­¦ä¹ è®°å½•</h3>
                    <div class="setting-item">
                        <label>æ€»å­¦ä¹ æ—¶é—´:</label>
                        <span id="totalStudyTime">0 åˆ†é’Ÿ</span>
                    </div>
                    <div class="setting-item">
                        <label>å­¦ä¹ å¤©æ•°:</label>
                        <span id="studyDays">0 å¤©</span>
                    </div>
                    <div class="setting-item">
                        <label>æŒæ¡è¯æ±‡:</label>
                        <span id="masteredWords">0 ä¸ª</span>
                    </div>
                    <div class="setting-item">
                        <button class="control-btn" onclick="clearProgress()" style="background: linear-gradient(45deg, #f44336, #d32f2f);">æ¸…é™¤è®°å½•</button>
                        <button class="control-btn" onclick="exportProgress()" style="background: linear-gradient(45deg, #4CAF50, #45a049);">å¯¼å‡ºæ•°æ®</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ˜Ÿæ˜ŸåŠ¨ç”»å®¹å™¨ -->
    <div class="stars-container" id="starsContainer"></div>
    
    <!-- é€šçŸ¥ -->
    <div class="notification" id="notification"></div>

    <!-- è„šæœ¬æ–‡ä»¶ -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/tts-adapter.js"></script>
    <script src="js/vocabulary-data.js"></script>
    <script src="js/vocabulary.js"></script>
    <script src="js/rewards.js"></script>
    <script src="js/animations.js"></script>
    <script src="js/game.js"></script>
    <script src="js/quiz.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/main.js"></script>

    <script>
      // æä¾›ä¸€ä¸ªå¯é€‰çš„å¯ç”¨è¯­éŸ³æŒ‰é’®ï¼ˆç§»åŠ¨ç«¯æ›´ç¨³ï¼‰
      (function(){
        try {
          var btn = document.createElement('button');
          btn.textContent = 'ğŸ”“ å¯ç”¨è¯­éŸ³';
          btn.style.cssText = 'position:fixed;right:12px;bottom:12px;padding:8px 12px;border-radius:8px;border:1px solid #ddd;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.15);z-index:9999;';
          btn.onclick = function(){
            if (window.TTS && typeof window.TTS.enable === 'function') {
              window.TTS.enable();
              btn.textContent = 'âœ… è¯­éŸ³å·²å¯ç”¨';
              setTimeout(function(){ btn.remove(); }, 800);
            } else {
              btn.remove();
            }
          };
          // ä»…åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º
          if (/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)) {
            document.body.appendChild(btn);
          }
        } catch (e) {}
      })();
    </script>
  </body>
</html>


/***** å­¦ä¹ ç±»å‹åˆ‡æ¢æŒ‰é’®æ ·å¼ *****/
.learn-type-switch { display:flex; gap:8px; align-items:center; }
.learn-type-btn { padding:6px 10px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; font-size:14px; }
.learn-type-btn:hover { background:#f4f4f4; }
.learn-type-btn.active { background:#4CAF50; color:#fff; border-color:#4CAF50; }