# 全屏学习区改造 Step-by-Step v2.0（强化治理版）

日期：2026-02-18
目标：在实现全屏体验的同时完成结构治理，降低后续维护成本。

## Phase 0：治理基线

### Step 0-1：配置真值源治理
- 动作：确定唯一 `capacitor.config.json` 真值源并文档化。
- 验收：构建链路无二义性。

### Step 0-2：脚本加载治理
- 动作：清理 `index.html` 重复 script 引用。
- 验收：同模块仅加载一次。

### Step 0-3：历史原型引用排查
- 动作：检索 `mobileSimple*` ID 的 JS 引用。
- 验收：确认“无运行时依赖”后再决定保留/删除注释块。

## Phase 1：功能主线实现

### Step 1-1：原生横屏与沉浸式
- 动作：`sensorLandscape` + fullscreen/cutout。
- 验收：启动稳定，状态栏与安全区正确。

### Step 1-2：全屏态接入现有视图
- 动作：不改迁移目标 ID；增强 header、隐藏底部导航。
- 验收：learn/quiz 全屏、home 正常。

### Step 1-3：退出复原机制
- 动作：统一 `switchToView('home')` 复原函数。
- 验收：退出后无 class 与样式残留。

## Phase 2：体验强化

### Step 2-1：触摸与滚动边界
- 动作：CSS 限制 + JS 兜底（仅全屏态生效）。
- 验收：无滑出、无误触串滚。

### Step 2-2：首页横屏重排（必做）
- 动作：卡片横向/网格布局，优化首屏信息层级。
- 验收：横屏首页可读、可操作。

### Step 2-3：首启弹窗策略重构
- 动作：方向选择改为模式说明或直接移除。
- 验收：不再出现“竖屏选项失效”体验。

## Phase 3：稳定性与发布

### Step 3-1：方向与生命周期回归
- 覆盖：冷启动、热启动、前后台、系统旋转事件。
- 验收：无闪烁、无布局错乱。

### Step 3-2：设备矩阵与性能抽检
- 覆盖：3类设备 + 连续操作 10 分钟。
- 验收：无明显卡顿、触控稳定。

### Step 3-3：发布与回滚
- 输出：详细回归报告、风险清单、回滚脚本说明。
- 验收：满足灰度发布条件。

## 里程碑
1. M0（D+0.5）：Phase 0 完成。
2. M1（D+2）：Phase 1 完成。
3. M2（D+3）：Phase 2 完成。
4. M3（D+4~5）：Phase 3 完成。
